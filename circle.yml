machine:
  node:
    version: v6.1.0
dependencies:
  override:
    - npm install
    - npm run install-typings
compile:
  override:
    - npm build
test:
  override:
    - '[ -f ./built/app.bundle.js ]'
deployment:
  production:
    branch: master
    commands:
      - echo 'Deploying to production'
      - aws s3 cp index.html s3://homeontheroute.com
      - aws s3 sync --delete built s3://homeontheroute.com/built
  beta:
    branch: beta
    commands:
      - echo 'Deploying to beta'
      - aws s3 cp index.html s3://beta.homeontheroute.com
      - aws s3 sync --delete built s3://beta.homeontheroute.com/built
